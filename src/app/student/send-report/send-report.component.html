<div class="container">
    <div class="manage-container">
        <app-back-button></app-back-button>
        <h3>Relatório de atendimento - {{ discipline.name }}</h3>
        <hr />

        <form>
            <label for="description">Descrição do atendimento: </label>
            <textarea [(ngModel)]="description" name="description" id="description" required></textarea>

            <label for="topic-selection">Selecione um ou mais tópicos</label>
            <div class="topic-select">
                <ng-select class="select"
                    placeholder="Selecione um tópico"
                    [(ngModel)]="selectedTopic"
                    name="topic-selection"
                    id="topic-selection"
                    >
                        @for (topic of disciplineTopics; track $index) {
                            <ng-option class="option" [value]="topic">{{ topic }}</ng-option>
                        }
                </ng-select>
                <button type="button" (click)="addTopic(selectedTopic)">Adicionar</button>
            </div>

            @if (reportTopics.length !== 0) {
                <h4>Tópicos</h4>
                @for (topic of reportTopics; track $index) {
                    <div class="topic-item">
                    <span>{{ topic }}</span>
                    <button class="remove-btn" (click)="removeTopic(topic)">x</button>
                    </div>

                }
            }

            <button type="submit" [disabled]="reportTopics.length === 0" (click)="sendReport()">Enviar</button>
        </form>
    </div>
</div>
